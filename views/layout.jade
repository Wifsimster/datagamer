doctype
html(lang="en", ng-app="StarterApp")
    head
        meta(name='viewport', content='width=device-width', initial-scale='1')

        title #{title}

        // Angular material design style
        link(rel="stylesheet", href="//rawgit.com/angular/bower-material/master/angular-material.css")

        // Lumx material design style
        link(rel="stylesheet", href="/bower_components/lumx/dist/css/lumx.css")

        // General style generate with Gulp
        link(rel='stylesheet', href='/stylesheets/style.css')

        // Lumx material design dependencies
        script(src="/bower_components/jquery/dist/jquery.js")
        script(src="/bower_components/velocity/velocity.js")
        script(src="/bower_components/moment/min/moment-with-locales.min.js")

        // Angular material design dependencies
        script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js")
        script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular-route.js")
        script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular-animate.min.js")
        script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular-aria.min.js")

        // Angular material design
        script(src="//rawgit.com/angular/bower-material/master/angular-material.js")

        // Lumx material design
        script(src="/bower_components/lumx/dist/js/lumx.js")

        // Masonry
        //script(src="/bower_components/angular-masonry/angular-masonry.js")

        // Angular controllers
        script(src="/js/app.js")

    body(ng-controller="AppCtrl", layout="row")
        // Sidebar left
        md-sidenav.md-sidenav-left.md-whiteframe-z2(layout="column", md-component-id="left", md-is-locked-open="$media('gt-sm')", tabindex="-1")

            // Sidebar Title
            md-toolbar.bgc-grey-900
                h1.md-toolbar-tools Datagamer

            // Sidebar Content
            md-content.tc-grey-900(style="overflow: auto;")
                ul.docs-menu
                    li.parent-list-item(ng-repeat="item in pages", ng-class="{parentActive:isActive('/{{item.url}}')}")
                        menu-link(section="page")
                            // Page without subnav
                            md-button.md-button(ng-if="!item.subnav", ng-href="/{{item.url}}", ng-class="{active:isActive('/{{item.url}}')}")
                                span {{item.title}}
                            // Page with subnav
                            md-button.md-button.md-button-toggle(ng-if="item.subnav", ng-click="toggle()")
                                span {{item.title}}
                                span.md-toggle-icon(ng-class="{'toggled' : isOpen()}")
                                    i.icon.icon--grey.icon--l.mdi.mdi--keyboard-arrow-up
                            // Subnav
                            ul.menu-toggle-list(ng-show="show")
                                li(ng-repeat="subitem in item.subnav")
                                    menu-link(section="page")
                                        md-button.md-button(ng-href="/{{item.url}}#{{subitem}}")
                                            span {{subitem}}

                            pagemenu(affix)

        div(layout="column", layout-fill, tabindex="-1" role="main")

            // Toolbar
            md-toolbar.bgc-grey-900
                .md-toolbar-tools(tabindex="0")
                    button.btn(hide-gt-sm="", aria-label="Toggle Menu", ng-click="openLeftMenu()")
                        i.icon.icon--l.icon--flat.mdi.mdi--menu
                    fill-height(layout="rox", flex)
                        .md-toolbar-item.md-breadcrumb
                            span {{breadcrumb}}

                    span(flex)

                    //.md-toolbar-item.md-tools(layout="row")
                        div

                        lx-select(ng-model="ajax.selected", change="cbSelect.exec(newValue, oldValue)", placeholder="Choose a game",
                        choices="ajax.list", filter="ajax.update(newValue, oldValue)", loading="{{ ajax.loading }}",
                        min-length="2", allow-clear="true", selection-to-model="ajax.toModel(data, callback)",
                        model-to-selection="ajax.toSelection(data, callback)")
                            lx-select-selected {{ $selected.name }} ({{ $selected.releaseDate }})
                            lx-select-choices  {{ $choice.name }} - {{ $choice.releaseDate }}


            md-content.md-padding(md-scroll-y, flex)
                div(ng-view)


    //footer
        //    p Running on node with Express, Jade and Stylus - Wifsimster